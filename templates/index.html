<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>FitFood</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
  <div class="header">
    <h1>FitFood</h1>
  </div>

  <div class="description">
    영양성분표를 첨부해서 식품이 안전한지 확인해보세요!
  </div>

  <form action="/submit" method="POST" enctype="multipart/form-data" class="main-form">
    <div class="form-group">
      <label>사진 업로드:</label>
      <label for="photo-gallery" class="custom-upload">📁 갤러리에서 선택</label>
      <input type="file" id="photo-gallery" name="photo" accept="image/*">
    </div>
    <div class="form-group">
      <img id="preview" alt="업로드한 사진 미리보기">
    </div>
    
    <div class="form-group">
      <label for="age">나이:</label>
      <input type="number" id="age" name="age" min="0" inputmode="numeric" required>
    </div>

    <div class="form-row">
      <div class="form-subgroup">
        <label for="gender" class="label-gender">성별:</label>
        <select id="gender" name="gender" required>
          <option value="">선택</option>
          <option value="male">남성</option>
          <option value="female">여성</option>
          <option value="other">기타</option>
        </select>
      </div>
      <div class="form-subgroup">
        <label for="weight" class="label-weight">몸무게(kg):</label>
        <input type="number" id="weight" name="weight" inputmode="decimal" required>
      </div>
    </div>

    <div class="form-group">
      <label for="calories">하루 칼로리 섭취량(kcal):</label>
      <select id="calories" name="calories" required>
        <option value="">선택</option>
        <option value="1200">1000 kcal</option>
        <option value="1200">1100 kcal</option>
        <option value="1200">1200 kcal</option>
        <option value="1300">1300 kcal</option>
        <option value="1400">1400 kcal</option>
        <option value="1500">1500 kcal</option>
        <option value="1600">1600 kcal</option>
        <option value="1700">1700 kcal</option>
        <option value="1800">1800 kcal</option>
        <option value="1900">1900 kcal</option>
        <option value="2000">2000 kcal</option>
        <option value="2100">2100 kcal</option>
        <option value="2200">2200 kcal</option>
        <option value="2300">2300 kcal</option>
        <option value="2400">2400 kcal</option>
        <option value="2500">2500 kcal</option>
        <option value="2500+">2500 kcal 이상</option>
      </select>
    </div>

    <div class="form-group">
      <label class="label-disease">지병:</label>
      <label>당뇨<input type="checkbox" name="conditions[]" value="당뇨" class="checkbox-disease"/></label>
      <label>비만<input type="checkbox" name="conditions[]" value="비만" class="checkbox-disease"/></label>
      <label>고혈압<input type="checkbox" name="conditions[]" value="고혈압" class="checkbox-disease"/></label>  
    </div>

    <button type="submit" class="submit-button">제출</button>
  </form>

  <script>
    const previewImg = document.getElementById('preview');
    const galleryInput = document.getElementById('photo-gallery');

    galleryInput.addEventListener('change', function() {
      const file = this.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          previewImg.src = e.target.result;
          previewImg.style.display = 'block';
        };
        reader.readAsDataURL(file);
      } else {
        previewImg.src = '';
        previewImg.style.display = 'none';
      }
    });
  </script>

</body>
</html>
